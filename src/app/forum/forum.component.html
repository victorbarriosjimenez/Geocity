<app-navigation></app-navigation>
<header>
        <div *ngIf="user; else loading" class="container">
                <div class="row">
                    <div class="col-md-offset-2 col-md-4 col-sm-offset-2 col-sm-4 col-xs-12">
                        <img src="{{ user.profilePhotoUrl }}" alt="">
                    </div>
                    <div class="col-md-6 col-sm-6 col-xs-12">
                       <div class="user-details">
                            <p>
                                {{ user.username }} 
                            </p>
                            <p class="country">{{ user.country | uppercase }}</p>                    
                            <p>{{ user.score }} pts</p>
                       </div>
        
                    </div>
                </div>
            </div>
            <ng-template #loading>
               <mat-spinner mode="indeterminate" color="primary"></mat-spinner>
            </ng-template>
</header>
<div class="container">
    <h2>Crea una nueva publicación</h2>
    <div class="form-container">
            <form (ngSubmit)="createNewPost()" [formGroup]="createPostForm">    
                <mat-form-field class="new-post">
                    <textarea 
                        matInput
                        type="text"
                        formControlName="body"
                        placeholder="¿Que esta pasando? ¡Compartelo con la comunidad!">
                    </textarea>
                </mat-form-field> 
                    <br>
                    <button [disabled]="!createPostForm.valid" mat-raised-button type="submit" color="warn">CREAR PUBLICACIÓN</button>
            </form>
    </div>
        <div *ngIf="posts; else loadingPosts" class="row">
                  <mat-card *ngFor="let post of posts" class="user-post">
                    <mat-card-header>
                      <div mat-card-avatar style="width: 75px; height:75px;" [ngStyle]="{'background-image': 'url('+post.authorProfilePhoto +')'}"></div>
                      <mat-card-title class="user-post-title">{{ post.authorUsername }}</mat-card-title>
                      <mat-card-subtitle class="user-post-timestamp"> {{ post.timestamp | date:'fullDate' }}</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                      <p class="user-post-body">
                         {{ post.body }}
                      </p>
                    </mat-card-content>
                    <mat-card-actions>
                      <button mat-button>LIKE</button>
                      <button mat-button>SHARE</button>
                    </mat-card-actions>
                </mat-card>
        </div>
        <ng-template #loadingPosts>
                <mat-spinner style="display: flex; margin: 0 auto;" mode="indeterminate" color="primary"></mat-spinner>
        </ng-template>
</div>
